{"version":3,"sources":["./src/app/pages/pa/files/files-routing.module.ts","./src/app/pages/pa/files/files.component.ts","./src/app/pages/pa/files/files.component.html","./src/app/pages/pa/files/files.module.ts","./src/app/pages/pa/files/files.service.ts","./src/app/pages/pa/files/images/images.component.ts","./src/app/pages/pa/files/images/images.component.html"],"names":[],"mappings":"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","file":"src_app_pages_pa_files_files_module_ts-es2015.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { ImagesComponent } from './images/images.component';\r\n\r\nconst routes: Routes = [\r\n    {\r\n        path: 'images',\r\n        component: ImagesComponent\r\n    },\r\n];\r\n\r\n@NgModule({\r\n    imports: [RouterModule.forChild(routes)],\r\n    exports: [RouterModule]\r\n})\r\nexport class FilesRoutingModule { }\r\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-files',\n  templateUrl: './files.component.html',\n  styleUrls: ['./files.component.scss']\n})\nexport class FilesComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n","<p>\n  files works!\n</p>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FilesComponent } from './files.component';\nimport { ImagesComponent } from './images/images.component';\nimport { FilesRoutingModule } from './files-routing.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FilesRoutingModule\n  ],\n  declarations: [FilesComponent, ImagesComponent]\n})\nexport class FilesModule { }\n","import { HttpClient, HttpEvent, HttpRequest } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { environment } from 'src/environments/environment';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class FilesService {\n  private file = {\n    images: `${environment.apiURL}/upload/images`,\n  };\n  constructor(private http: HttpClient) { }\n\n  uploadImages(file: File): Observable<HttpEvent<any>> {\n    const formData: FormData = new FormData();\n\n    formData.append('file', file);\n\n    const req = new HttpRequest('POST', this.file.images, formData, {\n      reportProgress: true,\n      responseType: 'json'\n    });\n\n    return this.http.request(req);\n  }\n\n  downloadImages() {\n    return this.http.get(this.file.images);\n  }\n}\n","import { HttpEventType, HttpResponse } from '@angular/common/http';\nimport { Component, OnInit } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { FilesService } from '../files.service';\n\n@Component({\n  selector: 'app-images',\n  templateUrl: './images.component.html',\n  styleUrls: ['./images.component.scss']\n})\nexport class ImagesComponent implements OnInit {\n\n  selectedFiles?: FileList;\n  progressInfos: any[] = [];\n  message: string[] = [];\n\n  previews = [];\n\n  constructor(private fileService: FilesService) { }\n\n  ngOnInit(): void {\n\n  }\n  selectFiles(event: any): void {\n    this.message = [];\n    this.progressInfos = [];\n    this.selectedFiles = event.target.files;\n\n    this.previews = [];\n    if (this.selectedFiles && this.selectedFiles[0]) {\n      const numberOfFiles = this.selectedFiles.length;\n      for (let i = 0; i < numberOfFiles; i++) {\n        const reader = new FileReader();\n        console.log();\n        reader.onload = (e: any) => {\n          this.previews.push({ imgSrc: e.target.result, name: this.selectedFiles[i].name });\n        };\n\n        reader.readAsDataURL(this.selectedFiles[i]);\n      }\n    }\n  }\n  uploadFiles(): void {\n    this.message = [];\n\n    if (this.selectedFiles) {\n      for (let i = 0; i < this.selectedFiles.length; i++) {\n        this.upload(i, this.selectedFiles[i]);\n      }\n    }\n  }\n  upload(idx: number, file: File): void {\n    this.progressInfos[idx] = { value: 0, fileName: file.name };\n\n    if (file) {\n      this.fileService.uploadImages(file).subscribe(\n        (event: any) => {\n          if (event.type === HttpEventType.UploadProgress) {\n            this.progressInfos[idx].value = Math.round(100 * event.loaded / event.total);\n          } else if (event instanceof HttpResponse) {\n            const msg = 'Uploaded the file successfully: ' + file.name;\n            this.message.push(msg);\n          }\n        },\n        (err: any) => {\n          this.progressInfos[idx].value = 0;\n          const msg = 'Không upload được file: ' + file.name;\n          this.message.push(msg);\n        });\n    }\n  }\n\n\n}\n","<div class=\"container-fluid\">\n  <!-- start page title -->\n  <div class=\"row\">\n    <div class=\"col-12\">\n      <div class=\"page-title-box d-flex align-items-center justify-content-between\">\n        <h4 class=\"mb-0 font-size-18\">Upload Images</h4>\n        <div class=\"page-title-right\">\n          <ol class=\"breadcrumb m-0\">\n            <li class=\"breadcrumb-item\">PA</li>\n            <li class=\"breadcrumb-item active\">Upload</li>\n          </ol>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div *ngFor=\"let progressInfo of progressInfos\" class=\"mb-2\">\n    <span>{{ progressInfo.fileName }}</span>\n    <div class=\"progress\">\n      <div class=\"progress-bar progress-bar-info progress-bar-striped\" role=\"progressbar\"\n        attr.aria-valuenow=\"{{ progressInfo.value }}\" aria-valuemin=\"0\" aria-valuemax=\"100\"\n        [ngStyle]=\"{ width: progressInfo.value + '%' }\">\n        {{ progressInfo.value }}%\n      </div>\n    </div>\n  </div>\n\n  <div class=\"row\">\n    <div class=\"row\">\n      <div class=\"col-sm-6\">\n        <div class=\"mt-3 \">\n          <label for=\"formFile\" class=\"form-label\">Upload ảnh thẻ Công Nhân viên tại đây</label>\n          <input class=\"form-control\" type=\"file\" accept=\"image/*\" id=\"formFile\" multiple\n            (change)=\"selectFiles($event)\" />\n        </div>\n        <button class=\"btn btn-success btn-sm mt-3 float-md-end\" [disabled]=\"!selectedFiles\" (click)=\"uploadFiles()\">\n          Upload\n        </button>\n        <div style=\"clear:both\"></div>\n        <div class=\"chat-conversation mt-3\">\n          <div class=\"conversation-list\">\n            <div class=\"ctext-wrap\">\n              <div class=\"conversation-name\">*Lưu ý:</div>\n              <p>- Có thể up nhiều ảnh cùng lúc</p>\n              <p>- Khi up ảnh yêu cầu đặt tên ảnh đúng với code</p>\n              <p>- Chỉ chấp nhận định dạng ảnh, sai không chịu trách nhiệm</p>\n            </div>\n          </div>\n        </div>\n\n      </div>\n      <div class=\"col-sm-6\">\n        <div class=\"row\">\n          <div *ngFor='let preview of previews' class=\"col-sm-3\">\n            <img [src]=\"preview.imgSrc\" class=\"rounded me-2 preview\">\n            <span>{{preview.name}}</span>\n          </div>\n\n        </div>\n        <div *ngIf=\"message.length\" class=\"alert alert-secondary my-3\" role=\"alert\">\n          <ul *ngFor=\"let msg of message; let i = index\">\n            <li>{{ msg }}</li>\n          </ul>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>"],"sourceRoot":"webpack:///"}