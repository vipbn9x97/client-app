{"version":3,"sources":["webpack:///src/app/pages/pa/files/files-routing.module.ts","webpack:///src/app/pages/pa/files/files.component.ts","webpack:///src/app/pages/pa/files/files.component.html","webpack:///src/app/pages/pa/files/files.module.ts","webpack:///src/app/pages/pa/files/files.service.ts","webpack:///src/app/pages/pa/files/images/images.component.html","webpack:///src/app/pages/pa/files/images/images.component.ts"],"names":["routes","path","component","ImagesComponent","FilesRoutingModule","RouterModule","FilesComponent","FilesModule","CommonModule","FilesService","http","file","images","environment","formData","FormData","append","req","HttpRequest","reportProgress","responseType","request","get","fileService","progressInfos","message","previews","event","selectedFiles","target","files","numberOfFiles","length","i","reader","FileReader","console","log","onload","e","push","imgSrc","result","name","readAsDataURL","upload","idx","value","fileName","uploadImages","subscribe","type","HttpEventType","Math","round","loaded","total","HttpResponse","msg","err","selectFiles","uploadFiles"],"mappings":"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","file":"src_app_pages_pa_files_files_module_ts-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { ImagesComponent } from './images/images.component';\r\n\r\nconst routes: Routes = [\r\n    {\r\n        path: 'images',\r\n        component: ImagesComponent\r\n    },\r\n];\r\n\r\n@NgModule({\r\n    imports: [RouterModule.forChild(routes)],\r\n    exports: [RouterModule]\r\n})\r\nexport class FilesRoutingModule { }\r\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-files',\n  templateUrl: './files.component.html',\n  styleUrls: ['./files.component.scss']\n})\nexport class FilesComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n","<p>\n  files works!\n</p>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FilesComponent } from './files.component';\nimport { ImagesComponent } from './images/images.component';\nimport { FilesRoutingModule } from './files-routing.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FilesRoutingModule\n  ],\n  declarations: [FilesComponent, ImagesComponent]\n})\nexport class FilesModule { }\n","import { HttpClient, HttpEvent, HttpRequest } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { environment } from 'src/environments/environment';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class FilesService {\n  private file = {\n    images: `${environment.apiURL}/upload/images`,\n  };\n  constructor(private http: HttpClient) { }\n\n  uploadImages(file: File): Observable<HttpEvent<any>> {\n    const formData: FormData = new FormData();\n\n    formData.append('file', file);\n\n    const req = new HttpRequest('POST', this.file.images, formData, {\n      reportProgress: true,\n      responseType: 'json'\n    });\n\n    return this.http.request(req);\n  }\n\n  downloadImages() {\n    return this.http.get(this.file.images);\n  }\n}\n","<div class=\"container-fluid\">\n  <!-- start page title -->\n  <div class=\"row\">\n    <div class=\"col-12\">\n      <div class=\"page-title-box d-flex align-items-center justify-content-between\">\n        <h4 class=\"mb-0 font-size-18\">Upload Images</h4>\n        <div class=\"page-title-right\">\n          <ol class=\"breadcrumb m-0\">\n            <li class=\"breadcrumb-item\">PA</li>\n            <li class=\"breadcrumb-item active\">Upload</li>\n          </ol>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div *ngFor=\"let progressInfo of progressInfos\" class=\"mb-2\">\n    <span>{{ progressInfo.fileName }}</span>\n    <div class=\"progress\">\n      <div class=\"progress-bar progress-bar-info progress-bar-striped\" role=\"progressbar\"\n        attr.aria-valuenow=\"{{ progressInfo.value }}\" aria-valuemin=\"0\" aria-valuemax=\"100\"\n        [ngStyle]=\"{ width: progressInfo.value + '%' }\">\n        {{ progressInfo.value }}%\n      </div>\n    </div>\n  </div>\n\n  <div class=\"row\">\n    <div class=\"row\">\n      <div class=\"col-sm-6\">\n        <div class=\"mt-3 \">\n          <label for=\"formFile\" class=\"form-label\">Upload ảnh thẻ Công Nhân viên tại đây</label>\n          <input class=\"form-control\" type=\"file\" accept=\"image/*\" id=\"formFile\" multiple\n            (change)=\"selectFiles($event)\" />\n        </div>\n        <button class=\"btn btn-success btn-sm mt-3 float-md-end\" [disabled]=\"!selectedFiles\" (click)=\"uploadFiles()\">\n          Upload\n        </button>\n        <div style=\"clear:both\"></div>\n        <div class=\"chat-conversation mt-3\">\n          <div class=\"conversation-list\">\n            <div class=\"ctext-wrap\">\n              <div class=\"conversation-name\">*Lưu ý:</div>\n              <p>- Có thể up nhiều ảnh cùng lúc</p>\n              <p>- Khi up ảnh yêu cầu đặt tên ảnh đúng với code</p>\n              <p>- Chỉ chấp nhận định dạng ảnh, sai không chịu trách nhiệm</p>\n            </div>\n          </div>\n        </div>\n\n      </div>\n      <div class=\"col-sm-6\">\n        <div class=\"row\">\n          <div *ngFor='let preview of previews' class=\"col-sm-3\">\n            <img [src]=\"preview.imgSrc\" class=\"rounded me-2 preview\">\n            <span>{{preview.name}}</span>\n          </div>\n\n        </div>\n        <div *ngIf=\"message.length\" class=\"alert alert-secondary my-3\" role=\"alert\">\n          <ul *ngFor=\"let msg of message; let i = index\">\n            <li>{{ msg }}</li>\n          </ul>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>","import { HttpEventType, HttpResponse } from '@angular/common/http';\nimport { Component, OnInit } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { FilesService } from '../files.service';\n\n@Component({\n  selector: 'app-images',\n  templateUrl: './images.component.html',\n  styleUrls: ['./images.component.scss']\n})\nexport class ImagesComponent implements OnInit {\n\n  selectedFiles?: FileList;\n  progressInfos: any[] = [];\n  message: string[] = [];\n\n  previews = [];\n\n  constructor(private fileService: FilesService) { }\n\n  ngOnInit(): void {\n\n  }\n  selectFiles(event: any): void {\n    this.message = [];\n    this.progressInfos = [];\n    this.selectedFiles = event.target.files;\n\n    this.previews = [];\n    if (this.selectedFiles && this.selectedFiles[0]) {\n      const numberOfFiles = this.selectedFiles.length;\n      for (let i = 0; i < numberOfFiles; i++) {\n        const reader = new FileReader();\n        console.log();\n        reader.onload = (e: any) => {\n          this.previews.push({ imgSrc: e.target.result, name: this.selectedFiles[i].name });\n        };\n\n        reader.readAsDataURL(this.selectedFiles[i]);\n      }\n    }\n  }\n  uploadFiles(): void {\n    this.message = [];\n\n    if (this.selectedFiles) {\n      for (let i = 0; i < this.selectedFiles.length; i++) {\n        this.upload(i, this.selectedFiles[i]);\n      }\n    }\n  }\n  upload(idx: number, file: File): void {\n    this.progressInfos[idx] = { value: 0, fileName: file.name };\n\n    if (file) {\n      this.fileService.uploadImages(file).subscribe(\n        (event: any) => {\n          if (event.type === HttpEventType.UploadProgress) {\n            this.progressInfos[idx].value = Math.round(100 * event.loaded / event.total);\n          } else if (event instanceof HttpResponse) {\n            const msg = 'Uploaded the file successfully: ' + file.name;\n            this.message.push(msg);\n          }\n        },\n        (err: any) => {\n          this.progressInfos[idx].value = 0;\n          const msg = 'Không upload được file: ' + file.name;\n          this.message.push(msg);\n        });\n    }\n  }\n\n\n}\n"]}